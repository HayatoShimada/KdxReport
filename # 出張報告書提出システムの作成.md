# 出張報告書提出システムの作成

## TechStack

- Blazor Server Side
- C#
- Entity Framework Core
- Npgsql Provider
- PostgreSQL
- Bootstrap
- jQuery
- SweetAlert2
- Toastr
- FontAwesome
- Google Fonts
- HTML5
- CSS3
- Tesseract OCR
- MinIO S3 将来はAWS S3に変更する。


## システムの概要
- Timezoneは日本時間にする。
- Dockerで構築する。
- Blazor Server Side + MinimumAPIモノリスアプリケーション。
- データベースはPostgreSQLで作成する。
- データベースを含むコンテナはdocker-compose.ymlで管理する。
- 画像ファイルとPDFファイルはMinIO S3に保存する。
- ローカルのWindowsPCをサーバーとして使う。
- 将来的にはAzureで構築する。

## 機能要件
- ログイン機能が必要
    - 認証情報はDBで管理する。
- 顧客と設備ごとに出張報告書を提出するシステム
    - 会社ごとにスレッドが存在して、コメントできる。誰が、いつコメントしたか。
    - Markdownで記述できる。
    - 必要な情報は出張期間、提出者、同伴者、顧客名、設備名、出張内容
    - 出張期間は日付で指定する。
    - 提出者は、ログインユーザーのみが提出できる。
    - 出張内容は、Markdownで記述できる。
    
- 出張報告書を閲覧するシステム
    - Markdownの内容をHTMLに変換して表示する。
    - 提出された出張報告書ごとにスレッドが存在して、コメントできる。
    - PDFで提出も可能。

- 出張報告書を検索するシステム
    - OCRを使用して、出張報告書を検索できる。
    - DB内のテキストデータを検索できる。


## データベース

- ユーザー
    - ユーザーID
    - ユーザー名
    - メールアドレス
    - パスワード 初期値 123456 初回ログイン時に強制更新
    - 作成日時
    - 更新日時
- ロール
    - ロールID
    - ロール名
    - 作成日時
    - 更新日時
- ロールユーザー
    - ロールID
    - ユーザーID
    - 作成日時
    - 更新日時
- 会社
    - 会社ID
    - 会社名
    - 作成日時
    - 更新日時
- 会社担当者
    - 顧客ID
    - 顧客名
    - メールアドレス
    - 電話番号
    - 作成日時
    - 更新日時
- 設備
    - 設備ID
    - 設備名
    - トータルカウンタ数
    - 作成日時
    - 更新日時
- 出張報告書
    - 出張報告書ID
    - 会社ID
    - 顧客ID
    - 設備ID
    - 出張期間
    - 提出者
    - 同伴者
    - 出張内容
- スレッド
    - スレッドID
    - 会社ID
    - 設備ID
    - 出張報告書ID
    - スレッド名
    - 作成日時
    - 更新日時
- コメント
    - コメントID
    - スレッドID
    - 返信先コメントID
    - ユーザーID
    - コメント内容
    - 作成日時
    - 更新日時
- 添付ファイル
    - 添付ファイルID
    - スレッドID
    - ファイル名
    - ファイルパス
    - 作成日時
    - 更新日時
